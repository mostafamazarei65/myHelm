---
# Source: baly-db-monitoring/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: postgres-155-databases-service
  labels:
    app: postgres-155-databases-service
spec:
  ports:
    - name: postgres-155-mysql-exporter
      protocol: TCP
      port: 9104
      targetPort: 9104
    - name: postgres-155-netdata
      protocol: TCP
      port: 19999
      targetPort: 19999
selector: {}
---
# Source: baly-db-monitoring/templates/endpoints.yaml
apiVersion: v1
kind: Endpoints
metadata:
  name: postgres-155-databases-service
  labels:
    app: postgres-155-databases-service
subsets:
  - addresses:
      - ip: 172.31.3.27
    ports:
      - port: 9104
        name: postgres-155-mysql-exporter
      - port: 19999
        name: postgres-155-netdata
---
# Source: baly-db-monitoring/templates/service-monitor.yaml
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: postgres-155-databases-monitor
  labels:
    app: postgres-155-databases-service
spec:
  selector:
    matchLabels:
      app: postgres-155-databases-service
  endpoints:
    - port: postgres-155-mysql-exporter
      interval: 1m
      path: "/metrics"
    - port: postgres-155-netdata
      interval: 1m
      path: "/api/v1/allmetrics?format=prometheus_all_hosts&timestamps=no"
    - port: postgres-155-netdata
      interval: 1m
      path: "/api/v1/allmetrics?format=prometheus_all_hosts&source=as-collected&timestamps=no"
